{
  "version": 3,
  "sources": [],
  "sections": [
    {"offset": {"line": 111, "column": 0}, "map": {"version":3,"sources":["file:///Users/monz/Code/queue/frontend/src/app/barcode/page.js"],"sourcesContent":["\"use client\";\nimport React, { useState } from 'react';\nimport axios from 'axios';\nimport { Html5Qrcode } from \"html5-qrcode\";\n\n\nfunction Barcode() {\n  const [barcode, setBarcode] = useState(\"\"); // Store the scanned barcode\n  const [isScanning, setIsScanning] = useState(false); // Toggle scanning state\n\n  // Modified function accepts the barcode as a parameter\n  const sendBarcodeToBackend = async (scannedBarcode) => {\n    try {\n      const response = await axios.post(`http://${process.env.HOST}:5000/upload`, { barcode: scannedBarcode });\n      alert(`Price for barcode ${scannedBarcode}: ${response.data.price}`);\n    } catch (error) {\n      console.error(\"Error sending barcode to backend:\", error);\n      alert(\"Failed to process the barcode.\");\n    }\n  };\n\n  const startScanning = () => {\n    const scannerElement = document.querySelector(\"#barcode-scanner\");\n    if (!scannerElement) {\n      console.error(\"Scanner element not found.\");\n      return;\n    }\n\n    setIsScanning(true);\n\n    const html5QrCode = new Html5Qrcode(\"barcode-scanner\");\n    html5QrCode\n      .start(\n        { facingMode: \"environment\" }, // Use the rear camera\n        {\n          fps: 10, // Frames per second\n          qrbox: { width: 250, height: 250 }, // Scanning box size\n        },\n        (decodedText) => {\n          // Once a barcode is detected:\n          setBarcode(decodedText);\n          // Stop scanning and then send the barcode automatically\n          html5QrCode.stop()\n            .then(() => {\n              setIsScanning(false);\n              sendBarcodeToBackend(decodedText);\n            })\n            .catch((err) => {\n              console.error(\"Error stopping scanner:\", err);\n              setIsScanning(false);\n            });\n        },\n        (errorMessage) => {\n          console.warn(\"Scanning error:\", errorMessage);\n        }\n      )\n      .catch((err) => {\n        console.error(\"Error initializing html5-qrcode:\", err);\n        setIsScanning(false);\n      });\n  };\n\n  return (\n    <div className=\"min-h-screen bg-gray-100 p-6\">\n      <h2 className=\"text-4xl font-bold mb-6 text-center text-red-600\">Queue System</h2>\n      <div className=\"max-w-4xl mx-auto bg-white p-6 rounded-lg shadow-md mb-8\">\n        <h3 className=\"text-2xl font-semibold mb-4 text-gray-700\">ðŸ“· Barcode Scanner</h3>\n        <div id=\"barcode-scanner\" className=\"w-full h-64 bg-gray-200 rounded-lg mb-4\"></div>\n        {isScanning ? (\n          <button\n            onClick={() => setIsScanning(false)}\n            className=\"bg-red-500 text-white px-4 py-2 rounded-lg hover:bg-red-600 transition\"\n          >\n            Stop Scanning\n          </button>\n        ) : (\n          <button\n            onClick={startScanning}\n            className=\"bg-blue-500 text-white px-4 py-2 rounded-lg hover:bg-blue-600 transition\"\n          >\n            Start Scanning\n          </button>\n        )}\n        {barcode && (\n          <div className=\"mt-4\">\n            <p className=\"text-lg text-gray-700\">\n              <strong>Scanned Barcode:</strong> {barcode}\n            </p>\n          </div>\n        )}\n      </div>\n    </div>\n  );\n}\n\nexport default Barcode;\n"],"names":[],"mappings":";;;;AACA;AACA;AACA;AAAA;AAHA;;;;;AAMA,SAAS;IACP,MAAM,CAAC,SAAS,WAAW,GAAG,CAAA,GAAA,qMAAA,CAAA,WAAQ,AAAD,EAAE,KAAK,4BAA4B;IACxE,MAAM,CAAC,YAAY,cAAc,GAAG,CAAA,GAAA,qMAAA,CAAA,WAAQ,AAAD,EAAE,QAAQ,wBAAwB;IAE7E,uDAAuD;IACvD,MAAM,uBAAuB,OAAO;QAClC,IAAI;YACF,MAAM,WAAW,MAAM,qIAAA,CAAA,UAAK,CAAC,IAAI,CAAC,CAAC,OAAO,EAAE,QAAQ,GAAG,CAAC,IAAI,CAAC,YAAY,CAAC,EAAE;gBAAE,SAAS;YAAe;YACtG,MAAM,CAAC,kBAAkB,EAAE,eAAe,EAAE,EAAE,SAAS,IAAI,CAAC,KAAK,EAAE;QACrE,EAAE,OAAO,OAAO;YACd,QAAQ,KAAK,CAAC,qCAAqC;YACnD,MAAM;QACR;IACF;IAEA,MAAM,gBAAgB;QACpB,MAAM,iBAAiB,SAAS,aAAa,CAAC;QAC9C,IAAI,CAAC,gBAAgB;YACnB,QAAQ,KAAK,CAAC;YACd;QACF;QAEA,cAAc;QAEd,MAAM,cAAc,IAAI,yJAAA,CAAA,cAAW,CAAC;QACpC,YACG,KAAK,CACJ;YAAE,YAAY;QAAc,GAC5B;YACE,KAAK;YACL,OAAO;gBAAE,OAAO;gBAAK,QAAQ;YAAI;QACnC,GACA,CAAC;YACC,8BAA8B;YAC9B,WAAW;YACX,wDAAwD;YACxD,YAAY,IAAI,GACb,IAAI,CAAC;gBACJ,cAAc;gBACd,qBAAqB;YACvB,GACC,KAAK,CAAC,CAAC;gBACN,QAAQ,KAAK,CAAC,2BAA2B;gBACzC,cAAc;YAChB;QACJ,GACA,CAAC;YACC,QAAQ,IAAI,CAAC,mBAAmB;QAClC,GAED,KAAK,CAAC,CAAC;YACN,QAAQ,KAAK,CAAC,oCAAoC;YAClD,cAAc;QAChB;IACJ;IAEA,qBACE,8OAAC;QAAI,WAAU;;0BACb,8OAAC;gBAAG,WAAU;0BAAmD;;;;;;0BACjE,8OAAC;gBAAI,WAAU;;kCACb,8OAAC;wBAAG,WAAU;kCAA4C;;;;;;kCAC1D,8OAAC;wBAAI,IAAG;wBAAkB,WAAU;;;;;;oBACnC,2BACC,8OAAC;wBACC,SAAS,IAAM,cAAc;wBAC7B,WAAU;kCACX;;;;;6CAID,8OAAC;wBACC,SAAS;wBACT,WAAU;kCACX;;;;;;oBAIF,yBACC,8OAAC;wBAAI,WAAU;kCACb,cAAA,8OAAC;4BAAE,WAAU;;8CACX,8OAAC;8CAAO;;;;;;gCAAyB;gCAAE;;;;;;;;;;;;;;;;;;;;;;;;AAOjD;uCAEe","debugId":null}},
    {"offset": {"line": 259, "column": 0}, "map": {"version":3,"sources":[],"names":[],"mappings":"A"}}]
}