{
  "version": 3,
  "sources": [],
  "sections": [
    {"offset": {"line": 7, "column": 0}, "map": {"version":3,"sources":["file://C%3A/Users/Administrator/Code/Queue/frontend/src/app/page.js"],"sourcesContent":["\"use client\";\r\n\r\nimport React, { useEffect, useState } from 'react';\r\nimport axios from 'axios';\r\nimport { io } from 'socket.io-client';\r\n\r\nconst socket = io('http://192.168.1.220:5000');\r\n\r\nfunction App() {\r\n  const [preparingTasks, setPreparingTasks] = useState([]);\r\n  const [finishedTasks, setFinishedTasks] = useState([]);\r\n  const [formData, setFormData] = useState({ category: 'BK', number: '' });\r\n\r\n  useEffect(() => {\r\n    loadTasks();\r\n\r\n    socket.on('update_tasks', (data) => {\r\n      setPreparingTasks(data.preparing);\r\n      setFinishedTasks(data.finished);\r\n    });\r\n\r\n    return () => {\r\n      socket.disconnect(); // Clean up on unmount\r\n    };\r\n  }, []);\r\n\r\n  const loadTasks = async () => {\r\n    const response = await axios.get('http://192.168.1.220:5000/tasks');\r\n    setPreparingTasks(response.data.preparing);\r\n    setFinishedTasks(response.data.finished);\r\n  };\r\n\r\n  const handleChange = (e) => {\r\n    setFormData({ ...formData, [e.target.name]: e.target.value });\r\n  };\r\n\r\n  const addTask = async () => {\r\n    if (!formData.category || !formData.number) {\r\n      alert('Please fill out all fields.');\r\n      return;\r\n    }\r\n    await axios.post('http://192.168.1.220:5000/tasks', formData);\r\n    setFormData({ category: 'BK', number: '' });\r\n  };\r\n\r\n  const finishTask = async (taskId) => {\r\n    await axios.post('http://192.168.1.220:5000/tasks/finish', { task_id: taskId });\r\n  };\r\n\r\n  // Safely sort finished tasks by finished_at time (latest first)\r\n  const sortedFinishedTasks = finishedTasks?.length\r\n    ? finishedTasks.sort((a, b) => {\r\n        const dateA = new Date(a.finished_at);\r\n        const dateB = new Date(b.finished_at);\r\n        return dateB - dateA; // descending order\r\n      })\r\n    : [];\r\n  return (\r\n    <div className=\"min-h-screen bg-gray-100 p-6\">\r\n      <h2 className=\"text-4xl font-bold mb-6 text-center text-red-600\">Queue System</h2>\r\n\r\n      {/* âœ… Add Task Form */}\r\n      <div className=\"max-w-4xl mx-auto bg-white p-6 rounded-lg shadow-md mb-8\">\r\n        <h3 className=\"text-2xl font-semibold mb-4 text-gray-700\">âž• Add Order</h3>\r\n        <div className=\"flex gap-4\">\r\n          <select\r\n            name=\"category\"\r\n            value={formData.category}\r\n            onChange={handleChange}\r\n            className=\"border rounded-lg p-3 w-full\"\r\n          >\r\n            <option value=\"BK\">BK</option>\r\n            <option value=\"CS\">CS</option>\r\n          </select>\r\n          <input\r\n            type=\"text\"\r\n            name=\"number\"\r\n            value={formData.number}\r\n            onChange={handleChange}\r\n            placeholder=\"enter number\"\r\n            className=\"border rounded-lg p-3 w-full\"\r\n          />\r\n          <button\r\n            onClick={addTask}\r\n            className=\"bg-green-500 text-white px-4 py-2 rounded-lg hover:bg-green-600 transition\"\r\n          >\r\n            Add Task\r\n          </button>\r\n        </div>\r\n      </div>\r\n\r\n      {/* âœ… Side-by-Side Queue Display */}\r\n      <div className=\"grid grid-cols-2 gap-6\">\r\n        {/* ðŸŸ¡ Preparing Queue */}\r\n        <div className=\"bg-yellow-50 p-6 rounded-lg shadow-md\">\r\n          <h3 className=\"text-2xl font-semibold mb-4 text-yellow-700\">ðŸ•’ Preparing Queue</h3>\r\n          <div className=\"grid grid-cols-2 gap-4 overflow-y-auto max-h-[500px]\">\r\n            {preparingTasks?.map((task, index) => (\r\n              <div key={index} className=\"bg-white border rounded-lg p-4 shadow-md flex justify-between items-center\">\r\n                <div>\r\n                  <span className=\"block font-bold text-xl\">{`${task.category}${task.number}`}</span>\r\n                  <span className=\"block text-sm text-gray-400\">\r\n                    Created at: {new Date(task.created_at).toLocaleString()}\r\n                  </span>\r\n                </div>\r\n                <button\r\n                  onClick={() => finishTask(task.task_id)}\r\n                  className=\"bg-red-500 text-white px-4 py-2 rounded-lg hover:bg-red-600 transition\"\r\n                >\r\n                  âœ… Finish\r\n                </button>\r\n              </div>\r\n            ))}\r\n          </div>\r\n        </div>\r\n\r\n        {/* âœ… Finished Queue */}\r\n        <div className=\"bg-green-50 p-6 rounded-lg shadow-md\">\r\n          <h3 className=\"text-2xl font-semibold mb-4 text-green-700\">âœ… Finished Queue</h3>\r\n          <div className=\"grid grid-cols-2 gap-4 overflow-y-auto max-h-[500px]\">\r\n            {sortedFinishedTasks?.map((task, index) => (\r\n              <div key={index} className=\"bg-white border rounded-lg p-4 shadow-md\">\r\n                <div>\r\n                  <span className=\"block font-bold text-xl\">{`${task.category}${task.number}`}</span>\r\n                  <span className=\"block text-sm text-gray-400\">\r\n                    Created at: {new Date(task.created_at).toLocaleString()}\r\n                  </span>\r\n                  <span className=\"block text-sm text-gray-400\">\r\n                    Finished at: {task.finished_at ? new Date(task.finished_at).toLocaleString() : 'Not finished'}\r\n                  </span>\r\n                </div>\r\n              </div>\r\n            ))}\r\n          </div>\r\n        </div>\r\n      </div>\r\n    </div>\r\n  );\r\n}\r\n\r\nexport default App;"],"names":[],"mappings":"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","debugId":null}},
    {"offset": {"line": 327, "column": 0}, "map": {"version":3,"sources":[],"names":[],"mappings":"A"}}]
}